#!/usr/bin/env bash

# Check for the required arguments
if [ "$#" -lt 1 ]; then
    echo "Usage: $0 <domain> [subdomain]"
    exit 1
fi

domain="$1"
subdomain="$2"

# Define subdomains to audit
subdomains=("www" "lb-01" "web-01" "web-02")

# Function to fetch information for a subdomain
fetch_subdomain_info() {
    sub="$1"
    info=$(dig "$sub.$domain" +short)

    if [ -n "$info" ]; then
        echo "The subdomain $sub is a $(dig "$sub.$domain" +short -t TYPE) record and points to $info"
    else
        echo "The subdomain $sub does not exist or could not be resolved"
    fi
}

# Display information for the specified subdomain or all subdomains
if [ -n "$subdomain" ]; then
    fetch_subdomain_info "$subdomain"
else
    for sub in "${subdomains[@]}"; do
        fetch_subdomain_info "$sub"
    done
fi

